apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "redis.fullname" . }}-config
  labels:
    {{- include "redis.labels" . | nindent 4 }}
data:
  redis.conf: |
    # Generated by Helm
    appendonly {{ .Values.config.appendonly | default "no" }}
    save {{ .Values.config.save }}
    {{- if .Values.config.maxmemory }}
    maxmemory {{ .Values.config.maxmemory }}
    {{- end }}
    {{- if .Values.config.maxmemory-policy }}
    maxmemory-policy {{ .Values.config.maxmemory-policy }}
    {{- end }}
    {{- range .Values.config.additionalConfig }}
    {{ . }}
    {{- end }}
